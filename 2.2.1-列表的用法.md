# 列表

## 列表定义

列表是Python中最基本的数据结构。是一些元素（如字符串，数字，对象）的有序集合，用中括号包围，每个元素用逗号分隔开。

每一个元素都有其对应的位置，称为索引，如第一个元素的索引为0，第二个元素的索引为1，依次类推。

可以通过索引唯一确定列表中的某个元素，列表内的元素不必全是相同的类型。

列表的长度是可变的，可以通过特定方法来增加删除元素。

## 列表长度

列表的长度是可变的，其长度等于列表中元素的个数。例如：

```
a = ['bob', 'sam', 1000, 1234]
print(len(a))
b = [1, 2, 3]
print(len(b))
```

运行结果：

```
4
3
```

可以发现如上两个列表a和b的长度是4和3，等于其元素的个数。

通过len()方法，方法参数传入列表对象即可获取列表长度。

## 列表创建

创建一个列表，只要把逗号分隔的不同的元素使用方括号括起来即可。例如：

```python
a = ['bob', 'sam', 1000, 1234]
```

变量a就是一个list（列表），其中包含了字符串、数字两种数据类型。

## 列表索引

索引即列表中元素的位置，用索引来访问列表中每一个位置的元素，每个元素用逗号分隔，第一个逗号前的元素的索引是0，以此类推。

用变量名加中括号包围的数字即可实现列表元素的访问，如a[1]代表获取索引为1的元素，即第二个元素。


在上例中，通过索引查找列表中的元素方法如下：

```python
>>> a = ['bob', 'sam', 1000, 1234]
>>> a[0]
'bob'
>>> a[1]
'sam'
>>> a[2]
1000
>>> a[3]
1234
>>> a[4]
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
IndexError: list index out of range
```

可以发现，通过a[0]，a[1]即可完成列表中元素的获取，由于列表中只包含四个元素，所以只可以通过a[0]，a[1]，a[2]，a[3]来获取四个元素，当使用a[4]尝试获取第五个元素时，由于列表中不存在第五个元素，所以出现越界的异常。

另外还可以传入值为负的索引。

```python
>>> a = ['bob', 'sam', 1000, 1234]
>>> a[-1]
1234
>>> a[-3]
'sam'
>>> a[-5]
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
IndexError: list index out of range
```

当索引为负的时候，其表示倒数第几个元素，如a[-1]则取出了倒数第一个元素，即1234。同样负索引也有界限限制，当访问a[-5]的时候，由于列表不存在倒数第五个元素，所以同样抛出越界异常。

## 列表嵌套

前文介绍过列表的元素可以是任意对象，所以列表的元素还可以是列表，这样就实现了列表嵌套。

```python
a = [1, 2, 3]
b = [4, 5, 6]
c = [7, 8, 9]
m = [a, b, c]
for e in m:
    print(e)
print('m:', m)
```

运行结果：

```
[1, 2, 3]
[4, 5, 6]
[7, 8, 9]
m: [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
```

可以发现，列表m即是三个列表a，b，c的集合，列表m的每个元素依然是一个列表。

## 列表操作

### 访问元素

访问元素即通过索引访问，变量名加索引即可完成元素的访问。

```python
a = ['bob', 'sam', 1000, 1234]
print('a[0]:', a[0])
```

输出结果

```
a[0]: bob
```

### 查找元素

可以通过index()从列表中找出某个值第一个匹配项的索引位置，该方法返回查找对象的索引位置，如果没有找到对象则抛出异常。例如：

```python
a = ['Google', 'Baidu', 'Taobao', 'Google']
print ('Google Index:', a.index('Google'))
print ('Taobao Index:', a.index('Taobao'))
print ('Runoob Index:', a.index('Runoob'))
```

运行结果：

```
Google Index: 0
Taobao Index: 2
Traceback (most recent call last):
File "/var/py/python/d.py", line 4, in <module>
print ('Runoob Index:', a.index('Runoob'))
ValueError: 'Runoob' is not in list
```

可以发现Google查找到的索引位置是其第一次出现的位置0，而Runoob在列表中不存在，抛出ValueError异常。

### 添加元素

添加元素有两种方式，一种是在列表末尾添加元素，另一种是在列表中间插入元素。

#### 末尾添加

末尾添加的方法是列表变量后加append()方法，传入要添加的元素即可。

```python
a = ['bob', 'sam', 1000, 1234]
a.append('hello')
print(a)
```

结果如下：

```
['bob', 'sam', 1000, 1234, 'hello']
```

可以发现调用了append()方法，传入一个参数，这个参数就会被当作新的元素添加到列表到末尾。

#### 中间添加

中加添加的方法是列表变量后加insert()方法，第一个参数是要插入的索引位置，第二个参数是被插入的元素本身。

```python
a = ['bob', 'sam', 1000, 1234]
a.insert(1, 'jack')
print(a)
```

结果如下：

```
['bob', 'jack', 'sam', 1000, 1234]
```

可以发现，'jack'最后的位置是索引位置1，所以第一个参数即为要插入的索引位置，后面的元素依次向后挪动一个位置。

### 更新元素

更新元素直接通过索引加等号赋值即可。

```python
a = ['bob', 'sam', 1000, 1234]
print("Value at index 2:", a[2])
a[2] = 2001;
print("New value at index 2:", a[2])
```

运行结果：

```
Value at index 2: 1000
New value at index 2: 2001
```

所以直接通过等号和索引赋值某个元素即可完成元素的更新。

### 删除元素

删除元素有三种方式，一种是删除末尾元素，另一种是删除通过索引删除指定元素，第三种是通过元素值删除列表中某个值的第一个匹配项。

#### 删除末尾元素

删除末尾元素使用pop()方法，直接在列表后调用即可。例如：

```python
a = ['bob', 'sam', 1000, 1234]
a.pop()
print(a)
```

运行结果：

```
['bob', 'sam', 1000]
```

pop()方法会将列表直接改变，不需要重新对列表赋值。

#### 删除索引元素

删除指定元素是通过del操作，后面跟列表的某一个元素，用索引来确定。例如：

```python
a = ['bob', 'sam', 1000, 1234]
print("Before Delete:", a)
del a[2];
print("After Delete:", a)
```

运行结果如下：

```
Before Delete: ['bob', 'sam', 1000, 1234]
After Delete: ['bob', 'sam', 1234]
```

在这里通过输出删除前和删除后的列表对比可以发现，通过调用`del a[2]`即成功完成了对第三个元素的删除。故删除元素时可以通过del操作加列表索引元素的方式来实现。

#### 删除匹配元素

通过del操作可以通过索引来删除某个元素，如果要通过元素值来删除，则需要使用remove()方法。例如：

```python
a = ['Google', 'Baidu', 'Taobao', 'Google']
a.remove('Google')
print('After Removed:', a)
```

运行结果：

```
After Removed: ['Baidu', 'Taobao', 'Google']
```

在这里删除Google，那么匹配到Google第一次出现在第一个位置，所以将其删除。

### 最值元素

列表中通过max()和min()方法可以获取其中的最大值和最小值。

#### 最大元素

```python
a = [1, 2, 4, 3]
print(max(a))
```

运行结果：

```
4
```

其一般用来比较数字，但如果存在字符串和数字的混合，那么会抛出异常

```python
a = [1,'a', 2, 4, 3]
print(max(a))
```

运行结果：

```
TypeError: unorderable types: str() > int()
```

如果都是字符串，那么则会比较每个字符串的大小，字符串的比较则通过字母表编码比较，码值大的越大。例如

```
a = ['Google', 'Baidu', 'Taobao']
print(max(a))
```

运行结果：

```
Taobao
```

在比较三者时，由于Taobao的开头是T，在字母表中相比Google的首字母G和Baidu的首字母B靠后，所以Taobao是最大的字符串。

所以运行结果是Taobao。

#### 最小元素

```python
a = [1, 2, 4, 3]
print(min(a))
```

运行结果：

```
1
```

同理最小元素不能数字和字符混合比较，而且如果都为字符串，则返回最小的字符串。

## 列表遍历

因列表是一个有序的集合，所以可以对其进行遍历访问，利用for循环即可实现取出列表中的每一个元素，以便对每一个元素进行进一步处理。例如：

```python
a = ['bob', 'sam', 1000, 1234]
for e in a:
    print(e)
```

运行结果：

```
bob
sam
1000
1234
```

利用for...in结构，将列表中的元素依次取出，每次循环取出的元素被赋值为e，共循环四次，e依次被赋值。

在for循环内部，可以对列表的元素进行进一步的操作。

## 列表切片

列表不仅仅可以通过索引的方式获取其中某个元素，还可以通过切片的方式获取它的子集。

切片顾名思义即将列表分割，得到列表的子集，得到的结果依然是一个列表，例如：

```python
a = [1, 2, 3, 4, 5, 6, 7]
print(a[2:4])
```

结果如下：

```
[3, 4]
```

可以发现取出的内容是[3, 4]，而我们传入的索引位置是[2:4]，则可以发现，索引冒号前的数字代表起始索引，4代表结束索引的后一个索引。即[2:4]实际上是取出了索引为2和3的元素。

由此可见索引为[m:n]的切片得到的结果是从list[m]到list[n-1]的列表元素集合。元素个数是n-m。

如果将冒号左边或右边的索引去掉会是怎样的情况？例如：

```python
a = [1, 2, 3, 4, 5, 6, 7]
print(a[:4])
print(a[2:])
```

结果如下：

```
[1, 2, 3, 4]
[3, 4, 5, 6, 7]
```

则可以观察到，索引如果省略，则直接将索引看作列表的起始或末尾索引。[:4]中冒号左边的索引省略，则直接看作0，所以返回结果等价于[0:4]，[2:]中冒号右边的索引省略，则直接看作列表的末尾元素的索引，列表长度是7，末尾索引是6，所以其等价于[2:7]。

另外索引还可以是负值，代表倒数第几个元素。例如：

```python
a = [1, 2, 3, 4, 5, 6, 7]
print(a[:-2])
print(a[-4:])
```

运行结果如下：

```
[1, 2, 3, 4, 5]
[4, 5, 6, 7]
```

同样的，-2索引对应的元素是6，而这个索引是在冒号后，所以返回结果等价于[0:-2]，也等价于[0:5]，所以结果是集合的前五个元素。

## 列表比较

两个列表可以使用大于小于的操作符进行比较。

如有列表a和列表b，那么

```python
a > b
```

则表示判断列表a是否比列表b大，如果是，那么就返回True，否则返回False。

> 注意：在Python2中还可以使用cmp()方法来比较两个列表，在Python3中该方法被移除。

参数是两个列表，比较的基准如下：

顺次对元素进行比较

* 如果比较的元素是同类型的，则比较其值，返回结果。
* 如果两个元素不是同一种类型, 如果一方是数字，一方是字符串，那么会抛出无法比较的错误。
* 如果均是字符，那么会比较字符的编码，编码大的结果大。
* 如果有一个列表首先到达末尾，则另一个长一点的列表大。
* 如果我们用尽了两个列表的元素而且所有元素都是相等的，那么二者相等。

举例如下：

```python
a = [1, 2, 3, 4, 5, 6, 7]
b = [1, 2, 3, 5]
print(a > b)
```

运行结果：

```
False
```

在比较时顺次对元素比较，前三个元素相同，则比较第四个元素，列表a的第四个元素是4，列表b的第四个元素是5，类型相同，则判断4小于5，停止比较，结果是a < b，所以返回结果是False。

```python
a = [1, 2, 3, '4', 5, 6, 7]
b = [1, 2, 3, 4]
print(a > b)
```

运行结果：

```
TypeError: unorderable types: str() > int()
```

可以发现当遇到不同字符，一个是字符，一个是数字的时候，会直接抛出错误。

```python
a = [1, 2, 3, 'c', 5, 6, 7]
b = [1, 2, 3, 'C']
print(a > b)
```

运行结果：

```
True
```

当遇到不同字符时，会比较其字母表，由于小写字母的码值大于大写字母，所以结果是大于，结果是True。

```python
a = [1, 2, 3, 'd', 5]
b = [1, 2, 3, 'd']
print(a > b)
```

运行结果：

```
True
```

当其中一个列表已经遍历完，而另一个列表还有其他字符时，则直接判断前者小于后者。

## 列表统计

列表中存在各种各样的元素，如果要统计某个元素出现了多少次，可以使用count()方法。

```python
a = ['Google', 'Baidu', 'Taobao', 'Google']
print(a.count('Google'))
```

运行结果：

```
2
```

如上所示，Google在列表中出现了两次，所以返回2。

## 列表合并

两个列表可以合并，合并时直接使用+号运算符进行合并即可。

```python
a = [1, 2, 3]
b = [4, 5, 6]
print(a + b)
```

运行结果：

```
[1, 2, 3, 4, 5, 6]
```

可以发现加号左边的列表会出现在结果的前面，后面的列表出现在结果的后面。

另外可以通过extend()方法对两个列表进行合并。例如：

```python
a = [1, 2, 3]
b = [4, 5, 6]
a.extend(b)
print(a)
```

运行结果：

```
[1, 2, 3, 4, 5, 6]
```

与加号不同的是，extend()方法会直接改变前者列表，即a会变成合并后的列表，而加号则直接返回合并后的列表。

## 列表复制

如果直接用等号声明为另一个变量，那么实际上是声明了列表的别名，二者实际上是指向同一个列表。

而真正的列表复制则需要使用copy()方法，它会返回一个新的列表对象，和原列表只是内容相同。

例如：

```python
a = [1, 2, 3]
b = a.copy()
b[1] = 3
print('a:', a, 'b:', b)
c = [1, 2, 3]
d = c
d[1] = 3
print('c:', c, 'd:', d)
```

运行结果：

```
a: [1, 2, 3] b: [1, 3, 3]
c: [1, 3, 3] d: [1, 3, 3]
```

由此可见，通过调用copy()方法生成了列表b，然后对列表b的某个值进行修改，不会影响原来的列表a。

## 列表反向

可以使用reverse()方法来实现列表反向，调用之后会直接改变原列表。

```python
a = [1, 2, 3]
a.reverse()
print('Reversed:', a)
```

运行结果：

```
Reversed: [3, 2, 1]
```

## 列表排序

可以使用sort()方法对列表进行排序，最大的元素出现在最后。

调用之后会改变原列表的内容。

```python
a = [3, 2, 5, 1]
a.sort()
print(a)
```

运行结果：

```
[1, 2, 3, 5]
```

可以发现其按照正向排序，原列表a的内容已经变化。

另外还可以对字符串排序

```python
a = ['Google', 'Baidu', 'Taobao']
a.sort()
print(a)
```

运行结果：

```
['Baidu', 'Google', 'Taobao']
```

如果想要反向排序，则传入reverse参数True即可。

```python
a = [3, 2, 5, 1]
a.sort(reverse=True)
print(a)
```

运行结果：

```
[5, 3, 2, 1]
```

## 列表清空

使用clear()方法可以将列表清空，例如：

```python
a = ['Google', 'Baidu', 'Taobao', 'Google']
a.clear()
print('After Cleared:', a)
```

运行结果：

```
After Cleared: []
```

可以发现通过clear()方法移除了列表所有的元素，但其仍保持了列表的数据结构。

## 列表转换

在后面会讲解到元组，使用list()方法可以将元组转换为列表，另外list()方法也可以将字符串转换为列表。例如：

```python
t = (123, 'Google', 'Runoob', 'Taobao')
l = list(t)
print("List:", l)
```

运行结果：
```
List: [123, 'Google', 'Runoob', 'Taobao']
```

如上方法便实现了元组向列表的转换。
另外list()方法还可以将字符串转为列表，例如：

```python
str = "Hello World"
l = list(str)
print("List:", l)
```
运行结果：

```
List: ['H', 'e', 'l', 'l', 'o', ' ', 'W', 'o', 'r', 'l', 'd']
```

所以当字符串转列表时，会将每一个字符当做列表的每一个元素进行转换，列表长度即为原字符串的长度。


