# 元组

## 元组定义

Python 的元组与列表类似，不同之处在于元组的元素不能修改。元组使用小括号，列表使用方括号。

元组创建很简单，只需要在括号中添加元素，并使用逗号隔开即可，当然括号不是必须的，但是标准写法是加上括号。

元组每一个元素也都有其对应的位置，称为索引，如第一个元素的索引为0，第二个元素的索引为1，依次类推。

可以通过索引唯一确定元组中的某个元素，元组内的元素不必全是相同的类型。

## 元组意义

元组相对于列表由于不能修改，所以会导致很多局限性，所以元组存在的意义是什么？

因为不能修改，所以可以安全地保存一个引用，而不用担心里面的内容被其他程序修改了导致逻辑错误。

因为元组不可变，因此当它可以保存一个不可变对象的引用，不用担心它被其他程序修改，任何时候它的hash值和等价关系都会保持不变，因此它可以作为字典的key或者在集合中使用。而列表则是一个可变的对象，它可以在内存原位上增加或者删除数据，它没有固定的hash值，使用hash计算一个list对象的hash值会报错，因此它也不可以作为字典的key来使用。

许多时候这两个类型可以相互替代，但一般来说当我们需要高效率修改的时候考虑用列表，而需要高效率比较时需要用元组。


## 元组创建

创建一个元组，只要把逗号分隔的不同的元素使用方括号括起来即可。例如：

```python
t1 = ('Facebook', 'Instagram', 32, 2000)
t2 = (1, 2, 3, 4, 5)
t3 = "a", "b", "c", "d"
```

如上方法便创建了元组t1、t2、t3，t3的类型同样是元组，不过它没有加小括号，但推荐加上括号更清晰地表示元组。

```python
>>> type(t3)
<class 'tuple'>
```

如上，输出t3的类型，依然是一个元组。

如果要创建一个空元组，直接声明为一对小括号即可。

```python
t = ()
```

注意，如果要声明只包含一个元素的元组，则需要在元素后加逗号，实例如下：

```python
t = (1)
print(type(t))
t = (1,)
print(type(t))
```

分别输出它们的类型，可以发现前者不加逗号实际上是原来元素的类型，加了逗号才会变成元组。

## 元组长度

元组其长度等于元组中元素的个数。例如：

```python
a = ('swift', 'php', 1000, 1234)
print(len(a))
b = (1, 2, 3)
print(len(b))
```

运行结果：

```
4
3
```

可以发现如上两个元组a和b的长度是4和3，等于其元素的个数。

通过len()方法，方法参数传入元组对象即可获取元组长度。

## 元组索引

索引即元组中元素的位置，用索引来访问元组中每一个位置的元素，每个元素用逗号分隔，第一个逗号前的元素的索引是0，以此类推。

用变量名加中括号包围的数字即可实现元组元素的访问，如a(1)代表获取索引为1的元素，即第二个元素。


在上例中，通过索引查找元组中的元素方法如下：

```python
>>> a = ('swift', 'php', 1000, 1234)
>>> a[0]
'swift'
>>> a[1]
'php'
>>> a[2]
1000
>>> a[3]
1234
>>> a[4]
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
IndexError: tuple index out of range
```

可以发现，通过a[0]，a[1]即可完成元组中元素的获取，由于元组中只包含四个元素，所以只可以通过a[0]，a[1]，a[2]，a[3]来获取四个元素，当使用a[4]尝试获取第五个元素时，由于元组中不存在第五个元素，所以出现越界的异常。

另外还可以传入值为负的索引。

```python
>>> a = ('swift', 'php', 1000, 1234)
>>> a[-1]
1234
>>> a[-3]
'php'
>>> a[-5]
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
IndexError: tuple index out of range
```

当索引为负的时候，其表示倒数第几个元素，如a(-1)则取出了倒数第一个元素，即1234。同样负索引也有界限限制，当访问a(-5)的时候，由于元组不存在倒数第五个元素，所以同样抛出越界异常。

## 元组切片

元组不仅仅可以通过索引的方式获取其中某个元素，还可以通过切片的方式获取它的子集。

切片顾名思义即将元组分割，得到元组的子集，得到的结果依然是一个元组，例如：

```python
a = (1, 2, 3, 4, 5, 6, 7)
print(a[2:4])
```

结果如下：

```
(3, 4)
```

可以发现取出的内容是(3, 4)，而我们传入的索引位置是[2:4]，则可以发现，索引冒号前的数字代表起始索引，4代表结束索引的后一个索引。即[2:4]实际上是取出了索引为2和3的元素。

由此可见索引为[m:n]的切片得到的结果是从tuple[m]到tuple[n-1]的元组元素集合。元素个数是n-m。

如果将冒号左边或右边的索引去掉会是怎样的情况？例如：

```python
a = (1, 2, 3, 4, 5, 6, 7)
print(a[:4])
print(a[2:])
```

结果如下：

```
(1, 2, 3, 4)
(3, 4, 5, 6, 7)
```

则可以观察到，索引如果省略，则直接将索引看作元组的起始或末尾索引。[:4]中冒号左边的索引省略，则直接看作0，所以返回结果等价于[0:4]，[2:]中冒号右边的索引省略，则直接看作元组的末尾元素的索引，元组长度是7，末尾索引是6，所以其等价于[2:7]。

另外索引还可以是负值，代表倒数第几个元素。例如：

```python
a = (1, 2, 3, 4, 5, 6, 7)
print(a[:-2])
print(a[-4:])
```

运行结果如下：

```
(1, 2, 3, 4, 5)
(4, 5, 6, 7)
```

同样的，-2索引对应的元素是6，而这个索引是在冒号后，所以返回结果等价于[0:-2]，也等价于[0:5]，所以结果是集合的前五个元素。

## 元组嵌套

前文介绍过元组的元素可以是任意对象，所以元组的元素还可以是元组，这样就实现了元组嵌套。

```python
a = (1, 2, 3)
b = (4, 5, 6)
c = (7, 8, 9)
m = (a, b, c)
for e in m:
    print(e)
print('m:', m)
```

运行结果：

```
(1, 2, 3)
(4, 5, 6)
(7, 8, 9)
m: ((1, 2, 3), (4, 5, 6), (7, 8, 9))
```

可以发现，元组m即是三个元组a，b，c的集合，元组m的每个元素依然是一个元组。

## 元组操作

### 访问元素

访问元素即通过索引访问，变量名加索引即可完成元素的访问。

```python
a = ('swift', 'php', 1000, 1234)
print('a[0]:', a[0])
```

输出结果

```
a(0): swift
```

### 查找元素

可以通过index()从元组中找出某个值第一个匹配项的索引位置，该方法返回查找对象的索引位置，如果没有找到对象则抛出异常。例如：

```python
a = ('Facebook', 'Baidu', 'Taobao', 'Facebook')
print ('Facebook Index:', a.index('Facebook'))
print ('Taobao Index:', a.index('Taobao'))
print ('Instagram Index:', a.index('Instagram'))
```

运行结果：

```
Facebook Index: 0
Taobao Index: 2
Traceback (most recent call last):
File "/var/py/python/d.py", line 4, in <module>
print ('Instagram Index:', a.index('Instagram'))
ValueError: 'Instagram' is not in tuple
```

可以发现Facebook查找到的索引位置是其第一次出现的位置0，而Instagram在元组中不存在，抛出ValueError异常。

### 添加、修改、删除、反向、排序、清空元素

元组和列表是不同的，元组的元素是无法改变的，所以元组不存在像列表一样的增删改方法。

所以其也不存在反向、排序、清空等操作。

### 最值元素

元组中通过max()和min()方法可以获取其中的最大值和最小值。

#### 最大元素

```python
a = (1, 2, 4, 3)
print(max(a))
```

运行结果：

```
4
```

其一般用来比较数字，但如果存在字符串和数字的混合，那么会抛出异常

```python
a = (1,'a', 2, 4, 3)
print(max(a))
```

运行结果：

```
TypeError: unorderable types: str() > int()
```

如果都是字符串，那么则会比较每个字符串的大小，字符串的比较则通过字母表编码比较，码值大的越大。例如

```
a = ('Facebook', 'Baidu', 'Taobao')
print(max(a))
```

运行结果：

```
Taobao
```

在比较三者时，由于Taobao的开头是T，在字母表中相比Facebook的首字母F和Baidu的首字母B靠后，所以Taobao是最大的字符串。

所以运行结果是Taobao。

#### 最小元素

```python
a = (1, 2, 4, 3)
print(min(a))
```

运行结果：

```
1
```

同理最小元素不能数字和字符混合比较，而且如果都为字符串，则返回最小的字符串。

## 元组遍历

因元组是一个有序的集合，所以可以对其进行遍历访问，利用for循环即可实现取出元组中的每一个元素，以便对每一个元素进行进一步处理。例如：

```python
a = ('swift', 'php', 1000, 1234)
for e in a:
    print(e)
```

运行结果：

```
swift
php
1000
1234
```

利用for...in结构，将元组中的元素依次取出，每次循环取出的元素被赋值为e，共循环四次，e依次被赋值。

在for循环内部，可以对元组的元素进行进一步的操作。


## 元组比较

两个元组可以使用大于小于的操作符进行比较。

如有元组a和元组b，那么

```python
a > b
```

则表示判断元组a是否比元组b大，如果是，那么就返回True，否则返回False。

参数是两个元组，比较的基准如下：

顺次对元素进行比较

* 如果比较的元素是同类型的，则比较其值，返回结果。
* 如果两个元素不是同一种类型, 如果一方是数字，一方是字符串，那么会抛出无法比较的错误。
* 如果均是字符，那么会比较字符的编码，编码大的结果大。
* 如果有一个元组首先到达末尾，则另一个长一点的元组大。
* 如果我们用尽了两个元组的元素而且所有元素都是相等的，那么二者相等。

举例如下：

```python
a = (1, 2, 3, 4, 5, 6, 7)
b = (1, 2, 3, 5)
print(a > b)
```

运行结果：

```
False
```

在比较时顺次对元素比较，前三个元素相同，则比较第四个元素，元组a的第四个元素是4，元组b的第四个元素是5，类型相同，则判断4小于5，停止比较，结果是a < b，所以返回结果是False。

```python
a = (1, 2, 3, '4', 5, 6, 7)
b = (1, 2, 3, 4)
print(a > b)
```

运行结果：

```
TypeError: unorderable types: str() > int()
```

可以发现当遇到不同字符，一个是字符，一个是数字的时候，会直接抛出错误。

```python
a = (1, 2, 3, 'c', 5, 6, 7)
b = (1, 2, 3, 'C')
print(a > b)
```

运行结果：

```
True
```

当遇到不同字符时，会比较其字母表，由于小写字母的码值大于大写字母，所以结果是大于，结果是True。

```python
a = (1, 2, 3, 'd', 5)
b = (1, 2, 3, 'd')
print(a > b)
```

运行结果：

```
True
```

当其中一个元组已经遍历完，而另一个元组还有其他字符时，则直接判断前者小于后者。

## 元组统计

元组中存在各种各样的元素，如果要统计某个元素出现了多少次，可以使用count()方法。

```python
a = ('Facebook', 'Baidu', 'Taobao', 'Facebook')
print(a.count('Facebook'))
```

运行结果：

```
2
```

如上所示，Facebook在元组中出现了两次，所以返回2。

## 元组合并

两个元组可以合并，合并时直接使用+号运算符进行合并即可，由于元组是无法修改的，所以合并后的结果实际上是返回了一个新的元组。

```python
a = (1, 2, 3)
b = (4, 5, 6)
print(a + b)
```

运行结果：

```
(1, 2, 3, 4, 5, 6)
```

可以发现加号左边的元组会出现在结果的前面，后面的元组出现在结果的后面。

> 注：元组不存在extend()方法，因其不能修改。


## 元组转换

使用tuple()方法可以将列表转换为元组，另外tuple()方法也可以将字符串转换为元组。例如：

```python
l = [123, 'Facebook', 'Instagram', 'Taobao']
t = tuple(l)
print("tuple:", t)
```

运行结果：
```
tuple: (123, 'Facebook', 'Instagram', 'Taobao')
```

如上方法便实现了元组向元组的转换。
另外tuple()方法还可以将字符串转为元组，例如：

```python
str = "Hello World"
l = tuple(str)
print("tuple:", l)
```
运行结果：

```
tuple: ('H', 'e', 'l', 'l', 'o', ' ', 'W', 'o', 'r', 'l', 'd')
```

所以当字符串转元组时，会将每一个字符当做元组的每一个元素进行转换，元组长度即为原字符串的长度。

所以如果想要让元组可变，结合上一节的内容，可以先变成list，然后再变回元组，例如：

```python
t = (1, 2, 3, 4)
l = list(t)
l.append(5)
t = tuple(l)
print(t)
```
